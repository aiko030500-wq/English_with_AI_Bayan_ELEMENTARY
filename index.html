<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENGLISH WITH AI BAYAN ‚Äì Beginner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --blue-main:#005b73;
      --blue-soft:#008a9e;
      --gold:#ffd54f;
      --bg:#f3f7fa;
      --topicColor:#005b73;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    body{
      background:var(--bg);
      color:#043042;
    }

    /* HEADER WITH GIRL LOGO */
    header{
      background:linear-gradient(90deg,#005b73,#008a9e);
      color:#fff;
      padding:10px 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 2px 6px rgba(0,0,0,.2);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .logo-img{
      width:50px;
      height:50px;
      border-radius:50%;
      object-fit:cover;
      border:3px solid var(--gold);
      background:white;
    }

    .brand-text h1{
      font-size:18px;
      letter-spacing:.04em;
    }

    .brand-text span{
      font-size:12px;
      opacity:.9;
    }

    .top-info{
      font-size:13px;
      text-align:right;
    }
    .top-info strong{color:var(--gold);}

    main{
      padding:16px;
      max-width:1300px;
      margin:0 auto;
    }

    .card{
      background:#fff;
      border-radius:14px;
      box-shadow:0 4px 14px rgba(0,0,0,.08);
      padding:20px;
    }

    .hidden{display:none !important;}

    .section-title{
      font-size:18px;
      margin-bottom:10px;
      font-weight:600;
    }
    .muted{
      color:#607080;
      font-size:12px;
    }

    .field-label{
      font-size:14px;
      margin-bottom:4px;
    }

    .text-input{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #c9d5df;
      margin-bottom:14px;
      font-size:14px;
    }
    .text-input:focus{
      outline:none;
      border-color:var(--blue-soft);
      box-shadow:0 0 0 2px rgba(0,138,158,.2);
    }

    .btn{
      border:none;
      border-radius:10px;
      padding:10px 18px;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
    }
    .btn-primary{
      background:var(--blue-soft);
      color:#fff;
    }
    .btn-primary:hover{background:#007487;}
    .btn-ghost{
      background:#eef5f9;
      color:var(--blue-main);
    }
    .btn-ghost:hover{background:#dde9f1;}

    .login-note{
      font-size:12px;
      color:#526675;
      margin-top:10px;
      line-height:1.4;
    }

    .error{
      margin-top:10px;
      color:#b00020;
      font-size:13px;
    }

    /* SCREENS */
    #loginScreen{
      max-width:520px;
      margin:40px auto;
    }

    #mainMenuScreen{
      display:grid;
      grid-template-columns:2fr 1.2fr;
      gap:16px;
    }
    @media(max-width:960px){
      #mainMenuScreen{
        grid-template-columns:1fr;
      }
    }

    .tag{
      display:inline-block;
      padding:2px 6px;
      border-radius:999px;
      background:#e3f2fd;
      font-size:11px;
      color:#005b73;
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:12px;
    }

    .stars-badge{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 8px;
      border-radius:999px;
      background:#fff9e5;
      border:1px solid #ffe082;
      font-size:12px;
    }
    .star-icon{color:#ffb300;}

    .topics-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:8px;
    }
    @media(max-width:700px){
      .topics-grid{grid-template-columns:1fr;}
    }

    .topic-card{
      border-radius:12px;
      border:1px solid #dde5ee;
      padding:10px 12px;
      background:#f8fafc;
      cursor:pointer;
      transition:.15s;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .topic-card:hover{
      background:#e3f2fd;
      transform:translateY(-1px);
    }
    .topic-card-title{
      font-size:14px;
      font-weight:600;
    }
    .topic-card-sub{
      font-size:11px;
      color:#607080;
    }

    /* AI PANEL (demo) */
    #aiPanel{
      background:#fff;
      border-radius:14px;
      padding:14px;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height:260px;
    }
    #aiPanel h3{
      font-size:15px;
      margin-bottom:4px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
    }
    #aiLimit{
      font-size:11px;
    }
    .chat-note{
      font-size:11px;
      color:#607080;
    }
    .chat-box{
      flex:1;
      border-radius:10px;
      border:1px solid #dde5ee;
      padding:8px;
      background:#f8fafc;
      font-size:13px;
      overflow-y:auto;
    }
    .chat-msg{
      margin-bottom:6px;
      line-height:1.4;
    }
    .chat-msg strong{color:#005b73;}
    #aiQuestion{
      width:100%;
      min-height:60px;
      resize:vertical;
      border-radius:10px;
      border:1px solid #c9d5df;
      padding:8px;
      font-size:13px;
      margin-top:4px;
    }
    #aiQuestion:focus{
      outline:none;
      border-color:var(--blue-soft);
      box-shadow:0 0 0 2px rgba(0,138,158,.17);
    }
    .chat-actions{
      display:flex;
      justify-content:flex-end;
      margin-top:4px;
    }

    /* TOPIC SCREEN */
    #topicScreen{
      max-width:1000px;
      margin:0 auto;
    }
    .topic-header{
      border-radius:16px 16px 0 0;
      padding:14px 16px;
      background:linear-gradient(90deg,var(--topicColor),#007d99);
      color:#fff;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .topic-header-main{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .topic-header-title{
      font-size:18px;
      font-weight:600;
    }
    .topic-header-tag{
      font-size:11px;
      opacity:.9;
    }
    .topic-header-buttons{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
    }
    .btn-topic{
      border:none;
      border-radius:999px;
      padding:6px 12px;
      font-size:12px;
      cursor:pointer;
      font-weight:600;
    }
    .btn-topic.back{
      background:#ffffff;
      color:var(--topicColor);
    }
    .btn-topic.menu{
      background:rgba(255,255,255,.15);
      color:#fff;
      border:1px solid rgba(255,255,255,.5);
    }

    .topic-body{
      background:#fff;
      border-radius:0 0 16px 16px;
      box-shadow:0 4px 14px rgba(0,0,0,.08);
      padding:16px;
    }

    .grammar-box{
      background:#f7fbff;
      border-left:4px solid var(--topicColor);
      padding:10px 12px;
      border-radius:10px;
      margin-bottom:12px;
      font-size:14px;
      line-height:1.5;
    }
    .grammar-box strong{color:#005b73;}
    .formula{
      font-family:"Consolas","Courier New",monospace;
      background:#e3f2fd;
      padding:3px 6px;
      border-radius:6px;
      margin-right:4px;
      display:inline-block;
      margin-top:4px;
    }
    .examples{
      margin-top:8px;
      font-size:13px;
    }
    .examples li{
      margin-left:18px;
      margin-bottom:2px;
    }
    .grammar-ru{
      margin-top:10px;
      font-size:13px;
      color:#24313f;
    }

    .exercises{
      margin-top:12px;
    }
    .exercise-block{
      border-radius:12px;
      background:#f8fafc;
      padding:10px 12px;
      margin-bottom:10px;
      border:1px solid #dde5ee;
    }
    .exercise-title{
      font-size:14px;
      font-weight:600;
      margin-bottom:6px;
    }
    .question-row{
      font-size:13px;
      margin-bottom:6px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:6px;
    }
    .question-text{
      flex:1 1 160px;
    }
    .options{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
    }
    .options label{
      background:#ffffff;
      border-radius:999px;
      border:1px solid #ccd7e3;
      padding:2px 8px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:3px;
    }
    .options input[type="radio"]{
      accent-color:var(--topicColor);
    }
    .mark{
      width:18px;
      text-align:center;
      font-size:16px;
      font-weight:700;
    }
    .mark.correct{color:#2e7d32;}
    .mark.wrong{color:#c62828;}
    .exercise-footer{
      margin-top:6px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .exercise-footer small{
      font-size:11px;
      color:#607080;
    }

    /* TEACHER */
    #teacherScreen{
      margin-top:20px;
    }
    .top-buttons{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .table-wrapper{
      overflow-x:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
      margin-top:10px;
    }
    th,td{
      border:1px solid #dde5ee;
      padding:6px 8px;
      text-align:left;
      white-space:nowrap;
    }
    th{
      background:#eef5f9;
      font-weight:600;
    }

    /* PRINT: only topic */
    @media print{
      header, #loginScreen, #mainMenuScreen, #teacherScreen{
        display:none !important;
      }
      body{
        background:#fff;
      }
      #topicScreen{
        display:block !important;
        margin:0;
        padding:0;
      }
      .topic-body{
        box-shadow:none;
        border-radius:0;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="brand">
    <img src="logo.png" alt="AI Bayan" class="logo-img">
    <div class="brand-text">
      <h1>ENGLISH WITH AI BAYAN</h1>
      <span>Beginner ¬∑ stars ¬∑ interactive topics</span>
    </div>
  </div>
  <div class="top-info" id="topInfo">Not logged in</div>
</header>

<main>
  <!-- LOGIN -->
  <section id="loginScreen" class="card">
    <h2 class="section-title">Login</h2>
    <p class="muted" style="margin-bottom:10px">
      Enter your <strong>Name</strong> and <strong>Code</strong>. Ask your teacher for the code.
    </p>

    <label class="field-label" for="loginName">Name</label>
    <input id="loginName" class="text-input" type="text" placeholder="Your name" />

    <label class="field-label" for="loginCode">Code</label>
    <input id="loginCode" class="text-input" type="password" placeholder="Student or teacher code" />

    <div style="display:flex;gap:8px;margin-top:4px">
      <button class="btn btn-primary" onclick="handleLogin()">Login</button>
      <button class="btn btn-ghost" onclick="backToLogin()">Reset</button>
    </div>

    <div id="loginError" class="error hidden"></div>
  </section>

  <!-- MAIN MENU (STUDENT) -->
  <section id="mainMenuScreen" class="hidden">
    <section class="card">
      <div class="top-row">
        <div>
          <h2 class="section-title" style="margin-bottom:4px;">Beginner topics</h2>
          <div id="menuInfo" class="muted"></div>
        </div>
        <div>
          <span class="stars-badge">
            <span class="star-icon">‚≠ê</span>
            Stars: <span id="menuStars">0</span>
          </span>
        </div>
      </div>

      <div class="topics-grid" id="menuTopics"></div>
    </section>

    <aside id="aiPanel">
      <div>
        <h3>
          AI Bayan
          <span id="aiLimit"></span>
        </h3>
        <p class="chat-note">
          Demo mode. AI chat will be added later.
        </p>
      </div>

      <div id="chatBox" class="chat-box"></div>

      <div>
        <textarea id="aiQuestion"
                  placeholder="AI chat will be available soon."
                  disabled></textarea>
        <div class="chat-actions">
          <button class="btn btn-primary" id="askBtn" disabled>Ask (soon)</button>
        </div>
        <p class="chat-note">
          Your questions will be visible for the teacher in the future version.
        </p>
      </div>
    </aside>
  </section>

    <!-- TOPIC SCREEN -->
  <section id="topicScreen" class="hidden">
    <div class="topic-header">
      <div class="topic-header-main">
        <div class="topic-header-title" id="topicHeaderTitle">Topic</div>
        <div class="topic-header-tag" id="topicHeaderTag"></div>
      </div>
      <div class="topic-header-buttons">
        <button class="btn-topic back" onclick="backToMenu()">‚Üê Back</button>
        <button class="btn-topic menu" onclick="backToMenu()">üè† Main menu</button>
        <button class="btn-topic menu" onclick="printCurrentTopic()">üñ® Print</button>
      </div>
    </div>
    <div class="topic-body">
      <div id="topicRuleContainer"></div>
      <div id="topicExercisesContainer"></div>
      <div id="topicStatus" class="muted" style="margin-top:8px;"></div>
    </div>
  </section>

  <!-- TEACHER -->
  <section id="teacherScreen" class="hidden card">
    <div class="top-buttons">
      <button class="btn btn-ghost" onclick="backToLogin()">‚Üê Back to login</button>
      <span class="tag">Teacher mode</span>
    </div>
    <h2 class="section-title">Teacher dashboard</h2>
    <p class="muted">
      Shows data saved in this browser: stars and last login (per code).
    </p>

    <div class="table-wrapper">
      <table id="teacherTable">
        <thead>
        <tr>
          <th>Class</th>
          <th>Code</th>
          <th>Name</th>
          <th>Stars</th>
          <th>Last login</th>
        </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
</main>

<script>
/* ---------- CLASS RANGES (PIN) ---------- */

const classRanges = [
  { cls: "3E",  from: 101,  to: 115 },
  { cls: "4G",  from: 201,  to: 215 },
  { cls: "5G",  from: 301,  to: 315 },
  { cls: "5Zh", from: 401,  to: 415 },
  { cls: "6G",  from: 501,  to: 515 },
  { cls: "7B",  from: 601,  to: 615 },
  { cls: "7V",  from: 701,  to: 715 },
  { cls: "8E",  from: 801,  to: 815 },
  { cls: "9Zh", from: 901,  to: 915 },
  { cls: "10A", from: 1001, to: 1015 }
];

function getClassByCode(num){
  for (const r of classRanges){
    if (num >= r.from && num <= r.to){
      return r.cls;
    }
  }
  return null;
}

/* ---------- TOPIC COLORS ---------- */

<h1>ENGLISH WITH AI BAYAN ‚Äì Intermediate Grammar Pack (20 Topics)</h1>

<!-- TOPIC 1 -->
<div class="topic" id="topic1">
  <h2>1. Present Perfect vs Past Simple</h2>
  <div class="meta">Level: Intermediate ¬∑ Experience vs finished past</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use <b>Present Perfect</b> for experience and results connected with now (no exact past time).
    We use <b>Past Simple</b> for finished actions in the past with a clear time (yesterday, last week, in 2019).
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>Present Perfect</b> ‚Äì –æ–ø—ã—Ç –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –Ω–∞—Å—Ç–æ—è—â–∏–º, –±–µ–∑ —Ç–æ—á–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏.  
    <b>Past Simple</b> ‚Äì –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ (yesterday, last year‚Ä¶).
  </div>

  <div class="formula">
    Present Perfect: have/has + V3 ¬∑ Past Simple: V2 / V-ed
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I ___ (visit) London many times.</li>
    <li>She ___ (already finish) her homework.</li>
    <li>They ___ (see) this film three times.</li>
    <li>We ___ (go) to Paris last summer.</li>
    <li>He ___ (meet) his best friend in 2018.</li>
    <li>I ___ (just write) an email to my teacher.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I ___ (not finish) my project yet.</li>
    <li>She ___ (never be) to London.</li>
    <li>They ___ (not see) him yesterday.</li>
    <li>We ___ (not visit) this museum last year.</li>
    <li>He ___ (not do) his homework yet.</li>
    <li>I ___ (not watch) this film in 2020.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>___ you ever ___ (try) sushi?</li>
    <li>When ___ you ___ (go) to London?</li>
    <li>How many times ___ she ___ (be) to Italy?</li>
    <li>___ they ___ (see) him yesterday?</li>
    <li>What ___ you ___ (do) last weekend?</li>
    <li>___ he ___ (finish) his homework yet?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>already / I / my homework / have / finished</li>
    <li>went / last year / to Spain / we</li>
    <li>ever / you / have / this film / seen</li>
    <li>not / yet / has / finished / she</li>
    <li>yesterday / met / I / him</li>
    <li>has / he / just / left</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>I _________ (never / see) this city before.</li>
    <li>She _________ (already / do) her homework.</li>
    <li>They _________ (go) to the park yesterday.</li>
    <li>We _________ (visit) that museum in 2019.</li>
    <li>He _________ (not / finish) the test yet.</li>
    <li>When _________ you _________ (meet) him?</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I (have seen / saw) this film three times.</li>
    <li>She (has already finished / finished) her homework yesterday.</li>
    <li>We (have visited / visited) London last year.</li>
    <li>They (have just arrived / arrived just) home.</li>
    <li>He (didn‚Äôt finish / hasn‚Äôt finished) his work yet.</li>
    <li>___ you (have ever been / were ever) to Paris?</li>
  </ol>
</div>

<!-- TOPIC 2 -->
<div class="topic" id="topic2">
  <h2>2. Present Perfect Continuous</h2>
  <div class="meta">Level: Intermediate ¬∑ Long actions until now</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use <b>Present Perfect Continuous</b> for actions that started in the past and continue until now or have a visible result now.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>Present Perfect Continuous</b> ‚Äì –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ –ø—Ä–æ—à–ª–æ–º –∏ –¥–ª–∏—Ç—Å—è –¥–æ —Å–∏—Ö –ø–æ—Ä –∏–ª–∏ –¥–∞–ª–æ –≤–∏–¥–∏–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ–π—á–∞—Å.  
    –ß–∞—Å—Ç–æ —Å: for, since, recently, lately.
  </div>

  <div class="formula">
    have/has + been + V-ing
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I ___ (study) English for three years.</li>
    <li>She ___ (work) here since 2020.</li>
    <li>They ___ (wait) for you for an hour.</li>
    <li>He ___ (play) football all afternoon.</li>
    <li>We ___ (talk) about this problem for a long time.</li>
    <li>It ___ (rain) since morning.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I ___ (not sleep) well recently.</li>
    <li>She ___ (not study) much this week.</li>
    <li>They ___ (not work) here for long.</li>
    <li>We ___ (not wait) for you for very long.</li>
    <li>He ___ (not feel) well lately.</li>
    <li>It ___ (not rain) for two weeks.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>How long ___ you ___ (wait) here?</li>
    <li>What ___ she ___ (do) all day?</li>
    <li>___ they ___ (study) for the exam?</li>
    <li>How long ___ he ___ (work) in this company?</li>
    <li>___ it ___ (rain) since morning?</li>
    <li>Why ___ you ___ (cry)?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>been / I / for two hours / have / studying</li>
    <li>has / working / all day / she / been</li>
    <li>have / waiting / we / for you / been</li>
    <li>been / playing / he / football / has</li>
    <li>has / raining / since morning / been / it</li>
    <li>they / been / talking / have / for a long time</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>She _________ (read) this book for an hour.</li>
    <li>I _________ (not feel) well lately.</li>
    <li>They _________ (work) here since last year.</li>
    <li>We _________ (wait) for the bus for 20 minutes.</li>
    <li>He _________ (not sleep) much these days.</li>
    <li>How long _________ you _________ (live) in this city?</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I (have been studying / studied) English for 5 years.</li>
    <li>She (has worked / has been working) here since 2021 ‚Äì process.</li>
    <li>They (have been waiting / waited) for you for an hour.</li>
    <li>He is tired because he (has been running / ran) for a long time.</li>
    <li>How long (have you been reading / did you read) this book?</li>
    <li>It (has been raining / rained) since morning.</li>
  </ol>
</div>

<!-- TOPIC 3 -->
<div class="topic" id="topic3">
  <h2>3. Past Continuous vs Past Simple</h2>
  <div class="meta">Level: Intermediate ¬∑ Background vs short actions</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    <b>Past Continuous</b> describes a long or background action in the past.  
    <b>Past Simple</b> describes short, finished actions that interrupt or follow.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>Past Continuous</b> ‚Äì –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ / —Ñ–æ–Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º.  
    <b>Past Simple</b> ‚Äì –∫–æ—Ä–æ—Ç–∫–æ–µ, –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (—á–∞—Å—Ç–æ ¬´–≤—Ä–µ–∑–∞–µ—Ç—Å—è¬ª –≤ —Ñ–æ–Ω).  
    –ß–∞—Å—Ç–æ –≤–º–µ—Å—Ç–µ —Å when/while.
  </div>

  <div class="formula">
    Past Continuous: was/were + V-ing ¬∑ Past Simple: V2 / V-ed
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I ___ (walk) home when it ___ (start) raining.</li>
    <li>She ___ (watch) TV when I ___ (arrive).</li>
    <li>They ___ (have) dinner when the phone ___ (ring).</li>
    <li>We ___ (play) football when it ___ (get) dark.</li>
    <li>He ___ (sleep) when the alarm ___ (go off).</li>
    <li>I ___ (do) my homework when my friend ___ (call) me.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I ___ (not watch) TV when you called.</li>
    <li>She ___ (not sleep) at 10 pm.</li>
    <li>They ___ (not play) outside when it started to rain.</li>
    <li>We ___ (not listen) to music when he came in.</li>
    <li>He ___ (not drive) fast when the accident happened.</li>
    <li>I ___ (not study) when my parents arrived.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>What ___ you ___ (do) at 7 pm yesterday?</li>
    <li>___ she ___ (watch) TV when you visited her?</li>
    <li>Where ___ they ___ (go) when you saw them?</li>
    <li>What ___ he ___ (do) when it started to rain?</li>
    <li>___ you ___ (sleep) when I called?</li>
    <li>Who ___ they ___ (talk) to when you entered?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>was / I / when / walking / started / it / raining</li>
    <li>she / TV / watching / was / arrived / I / when</li>
    <li>they / having / were / dinner / the phone / rang / when</li>
    <li>dark / playing / got / we / it / were / when</li>
    <li>sleeping / he / the alarm / went off / was / when</li>
    <li>doing / was / homework / I / my / called / friend / my / when</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>He _________ (drive) home when he _________ (see) the accident.</li>
    <li>We _________ (sit) in the park when it _________ (start) to rain.</li>
    <li>They _________ (not listen) when the teacher _________ (explain).</li>
    <li>She _________ (read) a book while he _________ (cook) dinner.</li>
    <li>I _________ (walk) to school when I _________ (meet) my friend.</li>
    <li>What _________ you _________ (do) when the lights _________ (go off)?</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I (was watching / watched) TV when he (called / was calling).</li>
    <li>They (were playing / played) outside when it (started / was starting) to rain.</li>
    <li>She (was walking / walked) home when she (saw / was seeing) the dog.</li>
    <li>We (were eating / ate) when the phone (rang / was ringing).</li>
    <li>He (was sleeping / slept) when I (came / was coming) in.</li>
    <li>What (were you doing / did you do) at 8 pm yesterday?</li>
  </ol>
</div>

<!-- TOPIC 4 -->
<div class="topic" id="topic4">
  <h2>4. Future Forms: Will / Going To / Present Continuous</h2>
  <div class="meta">Level: Intermediate ¬∑ Plans, decisions, timetables</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    <b>Will</b> ‚Äì instant decisions, promises, predictions.  
    <b>Be going to</b> ‚Äì plans, intentions, predictions with evidence.  
    <b>Present Continuous</b> ‚Äì fixed future arrangements (with time).
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>Will</b> ‚Äî —Ä–µ—à–µ–Ω–∏–µ —Å–µ–π—á–∞—Å, –æ–±–µ—â–∞–Ω–∏–µ, –ø—Ä–æ–≥–Ω–æ–∑.  
    <b>Be going to</b> ‚Äî —É–∂–µ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–π –ø–ª–∞–Ω/–Ω–∞–º–µ—Ä–µ–Ω–∏–µ, ¬´—Ç–∞–∫ —Å–æ–±–∏—Ä–∞—é—Å—å —Å–¥–µ–ª–∞—Ç—å¬ª.  
    <b>Present Continuous</b> ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å (–≤—Å—Ç—Ä–µ—á–∞, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ).
  </div>

  <div class="formula">
    will + V ¬∑ am/is/are going to + V ¬∑ am/is/are + V-ing (future meaning)
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I think it ___ (rain) tomorrow. (will)</li>
    <li>She ___ (visit) her grandparents next weekend. (is going to)</li>
    <li>They ___ (meet) at 6 pm tonight. (are meeting)</li>
    <li>We ___ (travel) to Italy this summer. (are going to)</li>
    <li>I ___ (help) you with your homework. (will)</li>
    <li>He ___ (start) a new course next month. (is going to)</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I ___ (not go) to the party. (am not going to)</li>
    <li>She ___ (not come) today. (won‚Äôt)</li>
    <li>They ___ (not leave) at 5, they ___ (leave) at 6. (aren‚Äôt leaving)</li>
    <li>We ___ (not travel) this year. (aren‚Äôt going to)</li>
    <li>He ___ (not do) it now. (won‚Äôt)</li>
    <li>It ___ (not be) easy. (won‚Äôt)</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>___ you ___ (help) me with this? (will)</li>
    <li>What ___ you ___ (do) tomorrow evening? (are)</li>
    <li>___ she ___ (visit) her parents this weekend? (is going to)</li>
    <li>When ___ they ___ (leave)? (are)</li>
    <li>Where ___ we ___ (meet)? (are)</li>
    <li>___ it ___ (rain) tomorrow? (will)</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>think / it / I / rain / will</li>
    <li>going / is / she / to / study / medicine</li>
    <li>meeting / they / at 7 / are</li>
    <li>help / I / you / will</li>
    <li>are / we / to / travel / going / this summer</li>
    <li>not / will / easy / be / it</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>Look at the clouds. It _________ (rain).</li>
    <li>We _________ (meet) at 4 o‚Äôclock tomorrow.</li>
    <li>I think he _________ (pass) the exam.</li>
    <li>She _________ (visit) her cousin next week.</li>
    <li>We _________ (not travel) this year.</li>
    <li>What _________ you _________ (do) this evening?</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>It‚Äôs very late. I (will take / am taking) a taxi.</li>
    <li>We (are going to visit / will visit) our grandma at the weekend ‚Äì plan.</li>
    <li>Look at those clouds! It (is going to rain / will rain).</li>
    <li>They (are meeting / will meet) at 7 ‚Äì it‚Äôs in their calendar.</li>
    <li>I promise I (will help / am going to help) you.</li>
    <li>She (is going to learn / learns) French next year.</li>
  </ol>
</div>

<!-- TOPIC 5 -->
<div class="topic" id="topic5">
  <h2>5. Used To / Be Used To / Get Used To</h2>
  <div class="meta">Level: Intermediate ¬∑ Past habits & adaptation</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    <b>used to + V</b> ‚Äì past habits or states that are not true now.  
    <b>be used to + V-ing/noun</b> ‚Äì to be accustomed to something now.  
    <b>get used to + V-ing/noun</b> ‚Äì to become accustomed, process of change.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>used to + V</b> ‚Äî ¬´—Ä–∞–Ω—å—à–µ –¥–µ–ª–∞–ª / –±—ã–ª–æ, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ—Ç¬ª.  
    <b>be used to + V-ing</b> ‚Äî ¬´–ø—Ä–∏–≤—ã–∫, –¥–ª—è –Ω–µ–≥–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ¬ª.  
    <b>get used to + V-ing</b> ‚Äî ¬´–ø—Ä–∏–≤—ã–∫–∞–µ—Ç (–ø—Ä–æ—Ü–µ—Å—Å)¬ª.
  </div>

  <div class="formula">
    used to + V ¬∑ be used to + V-ing / noun ¬∑ get used to + V-ing / noun
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I ___ (use) to play outside every day when I was a child.</li>
    <li>She ___ (be) used to getting up early.</li>
    <li>They ___ (get) used to living in a big city.</li>
    <li>He ___ (use) to live in a small village.</li>
    <li>We ___ (be) used to cold weather.</li>
    <li>She ___ (get) used to speaking English at school.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I ___ (not use) to like vegetables.</li>
    <li>She ___ (not be) used to driving on the left.</li>
    <li>They ___ (not get) used to the noise yet.</li>
    <li>He ___ (not use) to watch TV every day.</li>
    <li>We ___ (not be) used to such hot weather.</li>
    <li>She ___ (not get) used to online lessons.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>___ you ___ (use) to play outside a lot?</li>
    <li>___ she ___ (be) used to living alone?</li>
    <li>___ they ___ (get) used to the new school?</li>
    <li>What games ___ you ___ (use) to play?</li>
    <li>How long ___ he ___ (be) used to this job?</li>
    <li>When ___ you ___ (get) used to the climate?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>used / I / to / live / in a village</li>
    <li>is / to / used / she / getting up early</li>
    <li>used / they / living / to / are / in a city</li>
    <li>get / used / is / he / to / working / late</li>
    <li>used / we / to / weren‚Äôt / hot weather</li>
    <li>get / used / are / to / they / online lessons</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>I _________ (use) to play with my friends in the street.</li>
    <li>She is _________ (be used to) eating late.</li>
    <li>They are _________ (get used to) studying online.</li>
    <li>He _________ (not use to) drink coffee.</li>
    <li>We are _________ (not be used to) speaking English every day.</li>
    <li>She is _________ (get used to) her new school.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I (used to play / am used to play) football after school.</li>
    <li>She (is used to getting / used to get) up early.</li>
    <li>They (are getting used to / used to) living in London.</li>
    <li>He (didn‚Äôt use to like / wasn‚Äôt used to like) vegetables.</li>
    <li>We (aren‚Äôt used to / didn‚Äôt use to) hot weather.</li>
    <li>She (is getting used to / used to getting) online lessons.</li>
  </ol>
</div>

<!-- TOPIC 6 -->
<div class="topic" id="topic6">
  <h2>6. Modal Verbs of Deduction (must / might / can‚Äôt)</h2>
  <div class="meta">Level: Intermediate ¬∑ Guessing about the present</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use these modals to show how sure we are about something now:  
    <b>must</b> ‚Äì almost sure; <b>might/may/could</b> ‚Äì possible; <b>can‚Äôt</b> ‚Äì impossible.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –ú–æ–¥–∞–ª—å–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã –¥–ª—è –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ –Ω–∞—Å—Ç–æ—è—â–µ–º:  
    <b>must</b> ‚Äî –Ω–∞–≤–µ—Ä–Ω—è–∫–∞; <b>might/may/could</b> ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ; <b>can‚Äôt</b> ‚Äî –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å.
  </div>

  <div class="formula">
    must + V ¬∑ might/may/could + V ¬∑ can‚Äôt + V
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>He ___ be at home. The lights are on. (must)</li>
    <li>She ___ be a teacher. She works at school. (must)</li>
    <li>They ___ be tired after the trip. (must)</li>
    <li>It ___ be easy for you. (might)</li>
    <li>He ___ know the answer. (might)</li>
    <li>She ___ be in the library. (could)</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>He ___ be 10. He looks 20. (can‚Äôt)</li>
    <li>She ___ be at home. I saw her at school. (can‚Äôt)</li>
    <li>They ___ be hungry. They have just eaten. (can‚Äôt)</li>
    <li>It ___ be true. (can‚Äôt)</li>
    <li>He ___ be ill. He is playing football. (can‚Äôt)</li>
    <li>This story ___ be real. (can‚Äôt)</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Where can he be? He ___ be at work. (must/might?)</li>
    <li>Why is she late? She ___ be stuck in traffic. (might)</li>
    <li>Who is at the door? It ___ be our neighbours. (might)</li>
    <li>Why is he so happy? He ___ pass the exam. (must)</li>
    <li>Why is the light on? Someone ___ be inside. (must)</li>
    <li>Why is it so quiet? They ___ be sleeping. (might)</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>be / must / tired / he</li>
    <li>she / can‚Äôt / home / be / at</li>
    <li>be / they / might / busy</li>
    <li>true / be / can‚Äôt / it</li>
    <li>must / here / be / he</li>
    <li>might / in the park / be / they</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>He ___ be in his room. I hear music.</li>
    <li>She ___ be angry. She is smiling.</li>
    <li>They ___ be at school. It‚Äôs Sunday.</li>
    <li>It ___ be Tom. I can see his car.</li>
    <li>This ___ be a mistake. Check again.</li>
    <li>He ___ be Russian. His accent is different.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>He ___ be at work. (must / can‚Äôt)</li>
    <li>She ___ be 5. She is in grade 9. (can‚Äôt / might)</li>
    <li>They ___ be tired after the game. (must / can‚Äôt)</li>
    <li>It ___ be Anna, I‚Äôm not sure. (might / can‚Äôt)</li>
    <li>He ___ be ill. He is in hospital. (must / might)</li>
    <li>This story ___ be true. It‚Äôs crazy. (can‚Äôt / must)</li>
  </ol>
</div>

<!-- TOPIC 7 -->
<div class="topic" id="topic7">
  <h2>7. Second Conditional</h2>
  <div class="meta">Level: Intermediate ¬∑ Unreal present/future</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use the <b>Second Conditional</b> for unreal or imaginary situations in the present or future.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>Second Conditional</b> ‚Äì –Ω–µ—Ä–µ–∞–ª—å–Ω—ã–µ, –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –ø—Ä–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ/–±—É–¥—É—â–µ–µ: –º–µ—á—Ç—ã, —Å–æ–≤–µ—Ç—ã ¬´–Ω–∞ —Ç–≤–æ—ë–º –º–µ—Å—Ç–µ¬ª.
  </div>

  <div class="formula">
    If + Past Simple, would + V
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>If I had more money, I ___ (travel) around the world.</li>
    <li>If she studied harder, she ___ (get) better marks.</li>
    <li>If they lived near the sea, they ___ (swim) every day.</li>
    <li>If he spoke English well, he ___ (find) a good job.</li>
    <li>If we had a bigger house, we ___ (invite) more guests.</li>
    <li>If I were older, I ___ (drive) a car.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>If I didn‚Äôt love music, I ___ (not play) the guitar.</li>
    <li>If she weren‚Äôt so busy, she ___ (not work) every weekend.</li>
    <li>If they didn‚Äôt live far, they ___ (not miss) the bus.</li>
    <li>If he weren‚Äôt shy, he ___ (not stay) at home.</li>
    <li>If we didn‚Äôt have homework, we ___ (not be) tired.</li>
    <li>If I weren‚Äôt afraid, I ___ (not avoid) speaking in public.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>What would you do if you ___ (win) a million dollars?</li>
    <li>If you could travel anywhere, where ___ you ___ (go)?</li>
    <li>If she ___ (be) the teacher, what would change?</li>
    <li>Would he be happy if he ___ (move) to another city?</li>
    <li>If they ___ (have) more free time, what would they do?</li>
    <li>Would you help me if I ___ (ask) you?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>had / if / I / more time / would / I / study</li>
    <li>help / you / would / if / I / could / I</li>
    <li>if / she / harder / studied / get / would / better marks / she</li>
    <li>were / rich / if / would / he / travel / he</li>
    <li>not / if / so tired / they / would / sleep / be</li>
    <li>invite / more friends / we / if / would / bigger / had / house / a</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>If I _________ (be) you, I _________ (study) more.</li>
    <li>If she _________ (have) more time, she _________ (learn) Japanese.</li>
    <li>If they _________ (live) in London, they _________ (visit) museums.</li>
    <li>If we _________ (not have) school today, we _________ (go) to the beach.</li>
    <li>If he _________ (see) this film, he _________ (enjoy) it.</li>
    <li>If you _________ (call) me, I _________ (help) you.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>If I (have / had) wings, I (will / would) fly.</li>
    <li>If she (studied / studies) more, she (will / would) pass.</li>
    <li>He (will / would) help you if you (ask / asked) him.</li>
    <li>If they (lived / live) in Spain, they (will / would) speak Spanish.</li>
    <li>If we (didn‚Äôt have / don‚Äôt have) school, we (will / would) be happy.</li>
    <li>If you (were / are) my friend, I (would / will) trust you.</li>
  </ol>
</div>

<!-- TOPIC 8 -->
<div class="topic" id="topic8">
  <h2>8. Mixed Conditionals</h2>
  <div class="meta">Level: Intermediate ¬∑ Past cause, present result</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Mixed conditionals connect different times:  
    Past ‚Üí now: unreal past action with present result.  
    Now ‚Üí past: unreal present condition with past result.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –°–º–µ—à–∞–Ω–Ω—ã–µ —É—Å–ª–æ–≤–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–≤—è–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞:  
    –µ—Å–ª–∏ –±—ã —á—Ç–æ-—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –ø—Ä–æ—à–ª–æ–º, —Å–µ–π—á–∞—Å –±—ã–ª–æ –±—ã –ø–æ-–¥—Ä—É–≥–æ–º—É;  
    –∏–ª–∏ –µ—Å–ª–∏ –±—ã —Å–µ–π—á–∞—Å –±—ã–ª–æ –∏–Ω–∞—á–µ, –≤ –ø—Ä–æ—à–ª–æ–º –±—ã–ª–æ –±—ã –∏–Ω–∞—á–µ.
  </div>

  <div class="formula">
    Past ‚Üí now: If + Past Perfect, would + V (now) ¬∑ Now ‚Üí past: If + Past Simple, would have + V3
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>If I had studied harder, I ___ (be) at university now.</li>
    <li>If she had left earlier, she ___ (not be) late now.</li>
    <li>If they had saved money, they ___ (have) a car now.</li>
    <li>If he were more careful, he ___ (not have had) so many problems.</li>
    <li>If we were rich now, we ___ (have bought) that house.</li>
    <li>If you had listened to me, you ___ (be) happier now.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>If I hadn‚Äôt moved here, I ___ (not know) my best friend now.</li>
    <li>If she had not missed the train, she ___ (not be) so tired now.</li>
    <li>If they had not spent all the money, they ___ (not be) broke now.</li>
    <li>If he weren‚Äôt so shy, he ___ (not have missed) that chance.</li>
    <li>If we weren‚Äôt busy now, we ___ (not have cancelled) the trip.</li>
    <li>If you had not failed the exam, you ___ (not feel) so bad now.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>What would you ___ (do) now if you had stayed in your old school?</li>
    <li>If you hadn‚Äôt met your best friend, where would you ___ (be) now?</li>
    <li>If she were more confident, what would she ___ (have done) last year?</li>
    <li>If they had practised more, would they ___ (be) champions now?</li>
    <li>If he were taller, would he ___ (have become) a basketball player?</li>
    <li>If we had lived abroad, would we ___ (speak) English better now?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>had / I / harder / if / studied / be / would / I / now / at university</li>
    <li>if / listened / to me / had / you / be / happier / would / you / now</li>
    <li>have / would / they / if / money / more / saved / now / a car</li>
    <li>weren‚Äôt / he / so shy / would / have / he / that chance / missed / not</li>
    <li>hadn‚Äôt / if / we / moved / here / know / wouldn‚Äôt / our friends / we</li>
    <li>if / better / were / my English / have / I / would / found / a job</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>If I _________ (not waste) my time, I _________ (be) more successful now.</li>
    <li>If she _________ (work) harder, she _________ (not fail) last year.</li>
    <li>If they _________ (go) abroad, they _________ (speak) better English now.</li>
    <li>If we _________ (not miss) the train, we _________ (be) at home now.</li>
    <li>If he _________ (be) more careful, he _________ (not have) that accident.</li>
    <li>If you _________ (not shout) at him, he _________ (be) your friend now.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>If I (had studied / studied) harder, I (would be / would have been) at university now.</li>
    <li>If she (were / had been) more confident, she (would do / would have done) more last year.</li>
    <li>If they (had saved / saved) money, they (would have / would have had) a car now.</li>
    <li>If we (weren‚Äôt / hadn‚Äôt been) busy now, we (wouldn‚Äôt cancel / wouldn‚Äôt have cancelled) the trip.</li>
    <li>If he (had listened / listened) to you, he (wouldn‚Äôt be / wouldn‚Äôt have been) in trouble now.</li>
    <li>If you (were / had been) taller, you (would play / would have played) basketball.</li>
  </ol>
</div>

<!-- TOPIC 9 -->
<div class="topic" id="topic9">
  <h2>9. Passive Voice (Intermediate)</h2>
  <div class="meta">Level: Intermediate ¬∑ Focus on the action</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    The Passive Voice focuses on the action, not the doer. We use it when the doer is unknown or not important.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –°—Ç—Ä–∞–¥–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ª–æ–≥ (Passive) ‚Äî –≤–∞–∂–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ, —á–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:  
    ¬´–¥–æ–º –ø–æ—Å—Ç—Ä–æ–∏–ª–∏¬ª –≤–º–µ—Å—Ç–æ ¬´–∫—Ç–æ-—Ç–æ –ø–æ—Å—Ç—Ä–æ–∏–ª –¥–æ–º¬ª.
  </div>

  <div class="formula">
    Present: am/is/are + V3 ¬∑ Past: was/were + V3 ¬∑ Future: will be + V3
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>The letters ___ (send) every Monday.</li>
    <li>The homework ___ (check) by the teacher.</li>
    <li>This film ___ (watch) all over the world.</li>
    <li>The room ___ (clean) yesterday.</li>
    <li>The project ___ (finish) next week.</li>
    <li>English ___ (speak) in many countries.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>The work ___ (not do) on time.</li>
    <li>The test ___ (not check) yet.</li>
    <li>The email ___ (not send) yesterday.</li>
    <li>The room ___ (not clean) every day.</li>
    <li>The homework ___ (not do) by many students.</li>
    <li>The project ___ (not start) last month.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>When ___ the letters ___ (send)?</li>
    <li>___ the homework ___ (check) yesterday?</li>
    <li>Where ___ English ___ (speak)?</li>
    <li>___ the project ___ (finish) next week?</li>
    <li>Why ___ the work ___ (not do)?</li>
    <li>How often ___ the room ___ (clean)?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>is / homework / the / checked / always</li>
    <li>sent / emails / are / every day</li>
    <li>was / cleaned / the / yesterday / room</li>
    <li>will / be / finished / project / the / soon</li>
    <li>books / are / in the library / kept</li>
    <li>the / spoken / is / language / everywhere / English</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>The letters _________ (send) every week.</li>
    <li>The test _________ (not check) yet.</li>
    <li>The room _________ (clean) yesterday.</li>
    <li>The project _________ (finish) next month.</li>
    <li>These books _________ (keep) in the library.</li>
    <li>English _________ (speak) in this country.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>The homework (is do / is done) every day.</li>
    <li>The letters (are sent / send) on Fridays.</li>
    <li>The room (was cleaned / cleaned) yesterday.</li>
    <li>The project (will be finished / will finished) next week.</li>
    <li>English (is spoken / is speaked) here.</li>
    <li>The work (was not done / did not done) on time.</li>
  </ol>
</div>

<!-- TOPIC 10 -->
<div class="topic" id="topic10">
  <h2>10. Reported Speech (Statements)</h2>
  <div class="meta">Level: Intermediate ¬∑ Saying what someone said</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    In reported speech we repeat what someone said without quotation marks and usually shift tenses back into the past.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –ö–æ—Å–≤–µ–Ω–Ω–∞—è —Ä–µ—á—å ‚Äî –ø–µ—Ä–µ–¥–∞—ë–º —á—É–∂–∏–µ —Å–ª–æ–≤–∞ –±–µ–∑ –∫–∞–≤—ã—á–µ–∫, –æ–±—ã—á–Ω–æ —Å–¥–≤–∏–≥–∞—è –≤—Ä–µ–º—è ¬´–Ω–∞ —à–∞–≥ –Ω–∞–∑–∞–¥¬ª:  
    am ‚Üí was, do ‚Üí did, will ‚Üí would –∏ —Ç.–¥.
  </div>

  <div class="formula">
    say / tell + (that) + clause; tense backshift: Present ‚Üí Past, Past ‚Üí Past Perfect, will ‚Üí would
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>‚ÄúI am tired,‚Äù he said. ‚Üí He said he ___ (be) tired.</li>
    <li>‚ÄúWe will go home,‚Äù they said. ‚Üí They said they ___ (go) home.</li>
    <li>‚ÄúI like this book,‚Äù she said. ‚Üí She said she ___ (like) that book.</li>
    <li>‚ÄúI have finished,‚Äù he said. ‚Üí He said he ___ (finish).</li>
    <li>‚ÄúWe are happy,‚Äù they said. ‚Üí They said they ___ (be) happy.</li>
    <li>‚ÄúI can swim,‚Äù she said. ‚Üí She said she ___ (can) swim.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>‚ÄúI don‚Äôt know,‚Äù he said. ‚Üí He said he ___ (not know).</li>
    <li>‚ÄúWe won‚Äôt come,‚Äù they said. ‚Üí They said they ___ (not come).</li>
    <li>‚ÄúI didn‚Äôt see him,‚Äù she said. ‚Üí She said she ___ (not see) him.</li>
    <li>‚ÄúI haven‚Äôt finished,‚Äù he said. ‚Üí He said he ___ (not finish).</li>
    <li>‚ÄúWe aren‚Äôt ready,‚Äù they said. ‚Üí They said they ___ (not be) ready.</li>
    <li>‚ÄúI can‚Äôt drive,‚Äù she said. ‚Üí She said she ___ (not can) drive.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>‚ÄúWhere do you live?‚Äù he asked me. ‚Üí He asked me where I ___ (live).</li>
    <li>‚ÄúWhen will you come?‚Äù she asked. ‚Üí She asked when I ___ (come).</li>
    <li>‚ÄúDo you like English?‚Äù he asked. ‚Üí He asked if I ___ (like) English.</li>
    <li>‚ÄúDid you see the film?‚Äù she asked. ‚Üí She asked if I ___ (see) the film.</li>
    <li>‚ÄúAre you tired?‚Äù he asked. ‚Üí He asked if I ___ (be) tired.</li>
    <li>‚ÄúCan you help me?‚Äù she asked. ‚Üí She asked if I ___ (can) help her.</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>said / he / that / tired / he / was</li>
    <li>she / that / happy / was / said / she</li>
    <li>told / he / me / that / finished / had / he</li>
    <li>asked / if / me / he / liked / English / I</li>
    <li>they / coming / said / were / they / not</li>
    <li>she / asked / when / coming / I / was</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>He said he _________ (be) busy.</li>
    <li>She said she _________ (not like) the film.</li>
    <li>They said they _________ (go) to London.</li>
    <li>He told me he _________ (not see) that man before.</li>
    <li>She said she _________ (finish) her homework.</li>
    <li>They said they _________ (not be) ready.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>He said he (is / was) happy.</li>
    <li>She said she (likes / liked) that book.</li>
    <li>They said they (will go / would go) home.</li>
    <li>He said he (has finished / had finished) the test.</li>
    <li>She asked if I (am / was) tired.</li>
    <li>He asked when I (will come / would come).</li>
  </ol>
</div>

<!-- TOPIC 11 -->
<div class="topic" id="topic11">
  <h2>11. Relative Clauses (who / which / where)</h2>
  <div class="meta">Level: Intermediate ¬∑ Joining sentences</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use <b>who</b> for people, <b>which</b> for things/animals, <b>where</b> for places to add extra information about a noun.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è:  
    <b>who</b> ‚Äì –ª—é–¥–∏; <b>which</b> ‚Äì –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –∂–∏–≤–æ—Ç–Ω—ã–µ; <b>where</b> ‚Äì –º–µ—Å—Ç–∞.  
    –ü–æ–º–æ–≥–∞—é—Ç —Å–æ–µ–¥–∏–Ω—è—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ —É—Ç–æ—á–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ.
  </div>

  <div class="formula">
    noun + who/which/where + clause
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>The man ___ lives next door is a doctor.</li>
    <li>This is the book ___ I like most.</li>
    <li>That‚Äôs the caf√© ___ we met.</li>
    <li>She is the girl ___ helped me.</li>
    <li>This is the city ___ I was born.</li>
    <li>They have a dog ___ loves playing.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>He isn‚Äôt the person ___ I talked to.</li>
    <li>This isn‚Äôt the place ___ we had dinner.</li>
    <li>That‚Äôs not the film ___ I wanted to watch.</li>
    <li>She isn‚Äôt the girl ___ won the race.</li>
    <li>This isn‚Äôt the shop ___ I usually go.</li>
    <li>They aren‚Äôt the people ___ I invited.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Who is the man ___ is sitting there?</li>
    <li>What is the name of the book ___ you read?</li>
    <li>Where is the place ___ they usually meet?</li>
    <li>Who is the girl ___ helped you?</li>
    <li>Which is the film ___ you like best?</li>
    <li>What is the city ___ you want to visit?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>who / the man / lives / there / is</li>
    <li>book / which / reading / I / am / interesting / is</li>
    <li>is / the / we / place / where / meet</li>
    <li>girl / who / the / helped / me / is</li>
    <li>park / which / the / I / in / walk / is</li>
    <li>caf√© / where / met / we / is / this</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>This is the teacher _________ (who/which) explains well.</li>
    <li>That‚Äôs the film _________ (which/where) I want to see.</li>
    <li>Here is the restaurant _________ (where/who) we had lunch.</li>
    <li>He is the boy _________ (who/which) plays the guitar.</li>
    <li>This is the house _________ (where/which) I grew up.</li>
    <li>That‚Äôs the dog _________ (who/which) barks loudly.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>The man ___ lives next door is friendly. (who / which)</li>
    <li>This is the place ___ we met. (where / who)</li>
    <li>That‚Äôs the book ___ I told you about. (which / where)</li>
    <li>She is the girl ___ won the prize. (who / which)</li>
    <li>This is the city ___ I want to visit. (where / who)</li>
    <li>This is the dog ___ likes playing. (who / which)</li>
  </ol>
</div>

<!-- TOPIC 12 -->
<div class="topic" id="topic12">
  <h2>12. Gerunds & Infinitives (advanced)</h2>
  <div class="meta">Level: Intermediate ¬∑ Verb patterns</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Some verbs are followed by a gerund (V-ing), some by an infinitive (to + V), and some by object + infinitive.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –ü–æ—Å–ª–µ —Ä–∞–∑–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤ –∏–¥—É—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—ã:  
    <b>Gerund (V-ing)</b> ‚Äì enjoy, avoid, finish‚Ä¶  
    <b>Infinitive (to V)</b> ‚Äì want, decide, hope‚Ä¶  
    <b>object + to V</b> ‚Äì want someone to do.
  </div>

  <div class="formula">
    V + V-ing ¬∑ V + to V ¬∑ V + object + to V
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I enjoy ___ (read) books.</li>
    <li>She decided ___ (move) to another city.</li>
    <li>They want ___ (visit) London.</li>
    <li>He finished ___ (do) his homework.</li>
    <li>We hope ___ (see) you soon.</li>
    <li>She suggested ___ (go) to the cinema.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>He doesn‚Äôt want ___ (go) out tonight.</li>
    <li>She avoided ___ (talk) to him.</li>
    <li>They decided not ___ (buy) that car.</li>
    <li>I stopped ___ (eat) junk food.</li>
    <li>We didn‚Äôt plan ___ (stay) so long.</li>
    <li>She hates ___ (wait) in queues.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Do you enjoy ___ (learn) English?</li>
    <li>Why did she decide ___ (change) her job?</li>
    <li>Do they want ___ (travel) by train?</li>
    <li>What did he finish ___ (write)?</li>
    <li>Did you plan ___ (visit) your grandparents?</li>
    <li>Does she like ___ (cook) at home?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>reading / I / enjoy / books</li>
    <li>to / she / wants / learn / English</li>
    <li>decided / we / travel / to</li>
    <li>playing / he / football / loves</li>
    <li>go / suggested / she / to / cinema / the</li>
    <li>homework / finished / his / he / doing</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>I would like _________ (go) to the party.</li>
    <li>He enjoys _________ (play) the guitar.</li>
    <li>They decided _________ (stay) at home.</li>
    <li>She stopped _________ (watch) TV.</li>
    <li>We hope _________ (meet) you again.</li>
    <li>He suggested _________ (take) a taxi.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I enjoy (to read / reading) books.</li>
    <li>She wants (to go / going) home.</li>
    <li>They decided (to travel / travelling) by car.</li>
    <li>He finished (to write / writing) the letter.</li>
    <li>We hope (to see / seeing) you soon.</li>
    <li>She hates (to wait / waiting) in traffic.</li>
  </ol>
</div>

<!-- TOPIC 13 -->
<div class="topic" id="topic13">
  <h2>13. Articles (advanced)</h2>
  <div class="meta">Level: Intermediate ¬∑ a/an, the, zero</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    <b>a/an</b> ‚Äì first mention, one of many;  
    <b>the</b> ‚Äì specific, known;  
    <b>zero article</b> ‚Äì plural and uncountable in general, names, languages, sports.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>a/an</b> ‚Äì ¬´–∫–∞–∫–æ–π-—Ç–æ, –æ–¥–∏–Ω¬ª (–≤–ø–µ—Ä–≤—ã–µ —É–ø–æ–º–∏–Ω–∞–µ–º);  
    <b>the</b> ‚Äì ¬´—Ç–æ—Ç —Å–∞–º—ã–π, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π¬ª;  
    –±–µ–∑ –∞—Ä—Ç–∏–∫–ª—è ‚Äì –≤–æ–æ–±—â–µ, –≤ —Ü–µ–ª–æ–º (music, water), —è–∑—ã–∫–∏, –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞.
  </div>

  <div class="formula">
    a/an + singular countable ¬∑ the + specific noun ¬∑ √ò + general / plural / uncountable
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>He is ___ engineer.</li>
    <li>She bought ___ new phone.</li>
    <li>___ sun is very bright today.</li>
    <li>We visited ___ museum in our city.</li>
    <li>She loves ___ music.</li>
    <li>They play ___ football every weekend.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>He isn‚Äôt ___ doctor, he is ___ teacher.</li>
    <li>This isn‚Äôt ___ answer I wanted.</li>
    <li>We don‚Äôt have ___ car.</li>
    <li>She doesn‚Äôt play ___ piano.</li>
    <li>This isn‚Äôt ___ biggest city.</li>
    <li>They don‚Äôt watch ___ TV in the morning.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Is he ___ student or ___ teacher?</li>
    <li>Did you see ___ film I told you about?</li>
    <li>Do you like ___ music?</li>
    <li>Is this ___ book you were reading?</li>
    <li>Do they play ___ basketball?</li>
    <li>Is ___ Nile ___ longest river?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>engineer / he / an / is</li>
    <li>sun / the / shining / is</li>
    <li>a / she / has / cat</li>
    <li>museum / the / visited / we</li>
    <li>music / loves / she / √ò</li>
    <li>football / play / √ò / they</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>He is ___ (a / an / the) honest man.</li>
    <li>She bought ___ (a / an / the) interesting book.</li>
    <li>___ (A / An / The) moon is bright tonight.</li>
    <li>They live near ___ (a / the / √ò) sea.</li>
    <li>She loves ___ (the / √ò) classical music.</li>
    <li>He plays ___ (the / √ò) tennis every Saturday.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>He is ___ engineer. (a / an / the)</li>
    <li>This is ___ book you wanted. (a / an / the)</li>
    <li>She likes ___ music. (the / √ò)</li>
    <li>They saw ___ Eiffel Tower. (a / an / the)</li>
    <li>We visited ___ museum in our city. (a / the)</li>
    <li>He drinks ___ water every day. (a / √ò)</li>
  </ol>
</div>

<!-- TOPIC 14 -->
<div class="topic" id="topic14">
  <h2>14. Phrasal Verbs</h2>
  <div class="meta">Level: Intermediate ¬∑ Verb + particle</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    A phrasal verb = verb + particle (up, on, off, after‚Ä¶) and often has an idiomatic meaning not clear from the words.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –§—Ä–∞–∑–æ–≤—ã–π –≥–ª–∞–≥–æ–ª ‚Äì –≥–ª–∞–≥–æ–ª + –º–∞–ª–µ–Ω—å–∫–æ–µ —Å–ª–æ–≤–æ (up, on, off, after‚Ä¶), –∏ –≤–º–µ—Å—Ç–µ —á–∞—Å—Ç–æ –¥–∞—é—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:  
    break up ‚Äì —Ä–∞—Å—Å—Ç–∞—Ç—å—Å—è, look after ‚Äì –ø—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å.
  </div>

  <div class="formula">
    verb + particle ‚Üí new meaning (break up, turn on, look after, give up...)
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>They decided to break ___ (end the relationship).</li>
    <li>Please turn ___ the lights. It‚Äôs dark. (on)</li>
    <li>I will pick you ___ at 7 pm. (up)</li>
    <li>She looks ___ her little brother. (after)</li>
    <li>Don‚Äôt give ___ ‚Äî keep trying. (up)</li>
    <li>He took ___ a new hobby. (up)</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>Don‚Äôt turn ___ your phone in class. (on)</li>
    <li>They didn‚Äôt break ___ last year. (up)</li>
    <li>He doesn‚Äôt look ___ his plants well. (after)</li>
    <li>She didn‚Äôt give ___ when it was difficult. (up)</li>
    <li>We didn‚Äôt take ___ any new projects. (on/up)</li>
    <li>I don‚Äôt want to wake ___ early. (up)</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Can you turn ___ the TV, please? (on/off)</li>
    <li>Who looks ___ your dog when you travel? (after)</li>
    <li>When did they break ___? (up)</li>
    <li>Did you take ___ any new hobbies? (up)</li>
    <li>Why did he give ___ so soon? (up)</li>
    <li>What time do you wake ___? (up)</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>up / broke / they</li>
    <li>after / she / looks / her sister</li>
    <li>off / lights / turn / the</li>
    <li>gave / he / up / smoking</li>
    <li>up / children / the / wakes</li>
    <li>up / new / took / he / sport / a</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>Please _________ (turn on) the TV.</li>
    <li>They _________ (break up) last month.</li>
    <li>She _________ (look after) her grandparents.</li>
    <li>He _________ (take up) running last year.</li>
    <li>Don‚Äôt _________ (give up)! You can do it.</li>
    <li>We _________ (wake up) at 7 o‚Äôclock.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>She (looks after / looks for) her little sister.</li>
    <li>They (broke up / broke out) last year.</li>
    <li>Please (turn on / turn off) the radio.</li>
    <li>He (took off / took up) swimming as a hobby.</li>
    <li>Don‚Äôt (give in / give up) so easily.</li>
    <li>What time do you (wake up / get up) on Sundays?</li>
  </ol>
</div>

<!-- TOPIC 15 -->
<div class="topic" id="topic15">
  <h2>15. Linking Words</h2>
  <div class="meta">Level: Intermediate ¬∑ Connecting ideas</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Linking words connect sentences and ideas:  
    <b>although</b> (contrast), <b>however</b> (contrast), <b>because</b> (reason), <b>therefore</b> (result), <b>in order to</b> (purpose).
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –°–≤—è–∑—É—é—â–∏–µ —Å–ª–æ–≤–∞:  
    <b>although</b> ‚Äì —Ö–æ—Ç—è; <b>however</b> ‚Äì –æ–¥–Ω–∞–∫–æ; <b>because</b> ‚Äì –ø–æ—Ç–æ–º—É —á—Ç–æ;  
    <b>therefore</b> ‚Äì –ø–æ—ç—Ç–æ–º—É; <b>in order to</b> ‚Äì —á—Ç–æ–±—ã (—Ü–µ–ª—å).
  </div>

  <div class="formula">
    although + clause; clause. However, clause; because + clause; therefore + result; in order to + V
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>Although it was cold, we ___ (go) for a walk.</li>
    <li>He was tired; however, he ___ (finish) the work.</li>
    <li>She studied hard, therefore she ___ (pass) the exam.</li>
    <li>They went home because it ___ (be) late.</li>
    <li>He saved money in order to ___ (buy) a car.</li>
    <li>Although she was ill, she ___ (go) to school.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>Although he was hungry, he ___ (not eat).</li>
    <li>She was busy; however, she ___ (not call) us.</li>
    <li>They didn‚Äôt go out because it ___ (not stop) raining.</li>
    <li>We didn‚Äôt stay long, therefore we ___ (not see) everything.</li>
    <li>He didn‚Äôt save money in order to ___ (not buy) a car.</li>
    <li>Although they were tired, they ___ (not stop).</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Why did you stay at home although it ___ (be) sunny?</li>
    <li>Did he go to work although he ___ (be) ill?</li>
    <li>Why didn‚Äôt she call us, however she ___ (have) time?</li>
    <li>What did you do because you ___ (be) late?</li>
    <li>What did he buy in order to ___ (help) his family?</li>
    <li>Did they pass the exam, therefore they ___ (be) happy?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>cold / was / although / it / went / we / out</li>
    <li>tired / was / he / however / finished / work / his</li>
    <li>because / stayed / I / at home / it / raining / was</li>
    <li>to / English / order / study / in / she / passed / to</li>
    <li>late / it / home / went / they / because / was</li>
    <li>therefore / she / happy / was / passed / she / exam / the</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>_________ it was raining, we went outside.</li>
    <li>He was tired; _________, he finished the project.</li>
    <li>She didn‚Äôt come _________ she was ill.</li>
    <li>He saved money _________ buy a new phone.</li>
    <li>They were late; _________, they missed the train.</li>
    <li>_________ it was difficult, he didn‚Äôt give up.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>_________ it was cold, we went out. (Although / Because)</li>
    <li>He was tired; _________, he kept working. (however / because)</li>
    <li>She stayed home _________ she felt sick. (because / although)</li>
    <li>He worked hard; _________, he passed the exam. (therefore / although)</li>
    <li>He saved money _________ buy a car. (to / in order to)</li>
    <li>_________ it was late, they didn‚Äôt go to bed. (Although / Because)</li>
  </ol>
</div>

<!-- TOPIC 16 -->
<div class="topic" id="topic16">
  <h2>16. Countable & Uncountable Nouns</h2>
  <div class="meta">Level: Intermediate ¬∑ much/many, a little/a few, some/any</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Countable nouns can be counted (1,2,3‚Ä¶). Uncountable nouns cannot be counted easily.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –ò—Å—á–∏—Å–ª—è–µ–º—ã–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å (apple, book).  
    –ù–µ–∏—Å—á–∏—Å–ª—è–µ–º—ã–µ –Ω–µ–ª—å–∑—è –ø–æ—Å—á–∏—Ç–∞—Ç—å –ø–æ—à—Ç—É—á–Ω–æ (water, rice, sugar).
  </div>

  <div class="formula">
    many/few/a few + countable ¬∑ much/little/a little + uncountable ¬∑ some/any + both
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>There are ___ apples on the table. (many)</li>
    <li>There is ___ water in the glass. (a little)</li>
    <li>She has ___ friends in class. (a few)</li>
    <li>We need ___ sugar. (some)</li>
    <li>They have ___ books at home. (many)</li>
    <li>There is ___ rice left. (a little)</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>There aren‚Äôt ___ bananas. (any)</li>
    <li>We don‚Äôt have ___ milk. (any)</li>
    <li>She doesn‚Äôt have ___ time. (much)</li>
    <li>There aren‚Äôt ___ chairs. (many)</li>
    <li>He doesn‚Äôt need ___ coffee. (much)</li>
    <li>They don‚Äôt have ___ friends. (many)</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Do you have ___ water? (any)</li>
    <li>Are there ___ books? (any)</li>
    <li>How ___ money do you have? (much)</li>
    <li>How ___ apples are there? (many)</li>
    <li>Do they need ___ help? (any)</li>
    <li>Is there ___ bread? (any)</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>many / books / she / has</li>
    <li>water / little / a / there / is</li>
    <li>any / you / have / do / questions</li>
    <li>much / time / have / we / don‚Äôt</li>
    <li>few / a / friends / he / has</li>
    <li>sugar / any / isn‚Äôt / there</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>There are ___ (many/much) students.</li>
    <li>There is ___ (little/few) juice.</li>
    <li>She has ___ (a few/a little) pencils.</li>
    <li>Do we have ___ (some/any) eggs?</li>
    <li>He needs ___ (much/many) water.</li>
    <li>I have ___ (a little/a few) homework.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>How ___ water? (much / many)</li>
    <li>How ___ books? (much / many)</li>
    <li>She has ___ friends. (a few / a little)</li>
    <li>There isn‚Äôt ___ milk. (any / some)</li>
    <li>I have ___ money. (little / few)</li>
    <li>We need ___ sugar. (some / any)</li>
  </ol>
</div>

<!-- TOPIC 17 -->
<div class="topic" id="topic17">
  <h2>17. Complex Object (V + object + to V)</h2>
  <div class="meta">Level: Intermediate ¬∑ want/ask/tell someone to do</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Complex Object is used after verbs like want, ask, tell, expect, allow:  
    I want you to help me.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –°–ª–æ–∂–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: –≥–ª–∞–≥–æ–ª + –æ–±—ä–µ–∫—Ç + to V.  
    –ü—Ä–∏–º–µ—Ä—ã –≥–ª–∞–≥–æ–ª–æ–≤: want, ask, tell, expect, allow.  
    I want you to help ‚Äì –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –ø–æ–º–æ–≥.
  </div>

  <div class="formula">
    S + V + object + to V
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I want you ___ (help) me.</li>
    <li>They asked him ___ (come) early.</li>
    <li>She told me ___ (wait).</li>
    <li>We expect you ___ (finish) on time.</li>
    <li>He wants her ___ (call) later.</li>
    <li>They allowed us ___ (enter).</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I don‚Äôt want you ___ (go).</li>
    <li>They didn‚Äôt ask him ___ (stay).</li>
    <li>She didn‚Äôt tell me ___ (do) it.</li>
    <li>He doesn‚Äôt expect us ___ (win).</li>
    <li>We didn‚Äôt allow them ___ (leave).</li>
    <li>She doesn‚Äôt want me ___ (talk).</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Do you want me ___ (help)?</li>
    <li>Did they ask you ___ (come)?</li>
    <li>Does she want him ___ (study)?</li>
    <li>Did he tell you ___ (wait)?</li>
    <li>Do they expect her ___ (win)?</li>
    <li>Did you allow him ___ (drive)?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>help / want / I / to / you</li>
    <li>asked / come / they / him / to</li>
    <li>told / wait / she / me / to</li>
    <li>expect / finish / we / to / you</li>
    <li>her / wants / call / to / he</li>
    <li>allowed / us / enter / they / to</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>I want you _________ (help).</li>
    <li>They asked me _________ (bring) it.</li>
    <li>She told him _________ (sit).</li>
    <li>He allowed me _________ (go).</li>
    <li>We expect them _________ (win).</li>
    <li>She wants us _________ (listen).</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I want you ___ me. (to help / helping)</li>
    <li>They asked him ___ home. (to come / coming)</li>
    <li>She told me ___ quiet. (to be / be)</li>
    <li>He allowed us ___. (to leave / leaving)</li>
    <li>We expect you ___. (to try / trying)</li>
    <li>She wants me ___ more. (to study / studying)</li>
  </ol>
</div>

<!-- TOPIC 18 -->
<div class="topic" id="topic18">
  <h2>18. Causative Form (have/get something done)</h2>
  <div class="meta">Level: Intermediate ¬∑ Someone does it for you</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use causative when someone does something for us:  
    I had my hair cut. (= someone cut my hair).
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    –ö–∞—É–∑–∞—Ç–∏–≤: –º—ã –∑–∞–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ª—É–≥—É ‚Äì –∫—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –¥–ª—è –Ω–∞—Å.  
    I had my hair cut ‚Äì –º–Ω–µ –ø–æ—Å—Ç—Ä–∏–≥–ª–∏ –≤–æ–ª–æ—Å—ã.
  </div>

  <div class="formula">
    have/get + object + V3
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>I had my hair ___ (cut).</li>
    <li>She got her phone ___ (repair).</li>
    <li>We had our house ___ (paint).</li>
    <li>He got his car ___ (wash).</li>
    <li>They had their roof ___ (fix).</li>
    <li>She got her nails ___ (do).</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>I didn‚Äôt have my bike ___ (repair).</li>
    <li>She didn‚Äôt get her phone ___ (fix).</li>
    <li>They didn‚Äôt have their car ___ (wash).</li>
    <li>He didn‚Äôt get his suit ___ (clean).</li>
    <li>We don‚Äôt have our roof ___ (fix).</li>
    <li>She didn‚Äôt get her dress ___ (shorten).</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Did you have your hair ___ (cut)?</li>
    <li>Did she get her phone ___ (repair)?</li>
    <li>Did they have their house ___ (paint)?</li>
    <li>Did he get his car ___ (wash)?</li>
    <li>Do you have your laptop ___ (fix)?</li>
    <li>Did she get her nails ___ (do)?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>my / hair / had / cut / I</li>
    <li>got / phone / repaired / her / she</li>
    <li>car / their / washed / had / they</li>
    <li>house / painted / we / had / our</li>
    <li>his / he / suit / cleaned / got</li>
    <li>nails / her / done / got / she</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>I had my laptop _________ (fix).</li>
    <li>She got her jacket _________ (clean).</li>
    <li>They had their car _________ (repair).</li>
    <li>He got his boots _________ (polish).</li>
    <li>We had our garden _________ (water).</li>
    <li>She got her bag _________ (fix).</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>I had my hair ___. (cut / cutting)</li>
    <li>She got her phone ___. (repaired / repair)</li>
    <li>They had their car ___. (washed / wash)</li>
    <li>He got his suit ___. (cleaned / clean)</li>
    <li>We had our roof ___. (fixed / fix)</li>
    <li>She got her nails ___. (done / do)</li>
  </ol>
</div>

<!-- TOPIC 19 -->
<div class="topic" id="topic19">
  <h2>19. Cleft Sentences (It is/was ‚Ä¶ that ‚Ä¶)</h2>
  <div class="meta">Level: Intermediate ¬∑ Emphasis</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    Cleft sentences use <b>It is/was</b> to emphasize a person, thing or time:  
    It was John who helped me.
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    Cleft-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—é—Ç –≤–∞–∂–Ω—É—é —á–∞—Å—Ç—å:  
    It was John who helped me ‚Äì –ò–º–µ–Ω–Ω–æ –î–∂–æ–Ω –ø–æ–º–æ–≥ –º–Ω–µ.
  </div>

  <div class="formula">
    It is/was + noun/pronoun + who/that + clause
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>It was John ___ helped me.</li>
    <li>It was the exam ___ stressed her.</li>
    <li>It is the book ___ I like most.</li>
    <li>It was my mom ___ cooked dinner.</li>
    <li>It is the place ___ we met.</li>
    <li>It was Tom ___ called me.</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>It wasn‚Äôt John ___ called me.</li>
    <li>It wasn‚Äôt the test ___ scared her.</li>
    <li>It isn‚Äôt the film ___ I want.</li>
    <li>It wasn‚Äôt my dad ___ fixed it.</li>
    <li>It isn‚Äôt the shop ___ I mean.</li>
    <li>It wasn‚Äôt the dog ___ barked.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Who was it ___ helped you?</li>
    <li>What was it ___ made you upset?</li>
    <li>Who was it ___ called?</li>
    <li>What is it ___ you want?</li>
    <li>Who was it ___ opened the door?</li>
    <li>What was it ___ broke?</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>was / it / John / helped / who / me</li>
    <li>exam / the / stressed / her / it / was</li>
    <li>the / is / it / book / like / I / that</li>
    <li>cooked / it / my mom / was / dinner</li>
    <li>place / is / it / we / met / the / where</li>
    <li>called / it / Tom / was / who</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>It was my friend _________ (who/that) helped.</li>
    <li>It is the food _________ (that/where) I love.</li>
    <li>It was the movie _________ (that/who) scared me.</li>
    <li>It was she _________ (who/that) won.</li>
    <li>It is the teacher _________ (who/which) explains well.</li>
    <li>It was the day _________ (when/that) we met.</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>It was John ___ helped me. (who / which)</li>
    <li>It is the place ___ we met. (where / that)</li>
    <li>It was the dog ___ barked. (that / where)</li>
    <li>It isn‚Äôt the book ___ I want. (that / who)</li>
    <li>It was Anna ___ called. (who / where)</li>
    <li>It was the moment ___ changed everything. (that / who)</li>
  </ol>
</div>

<!-- TOPIC 20 -->
<div class="topic" id="topic20">
  <h2>20. Quantifiers: too / enough / so / such</h2>
  <div class="meta">Level: Intermediate ¬∑ Degree & intensity</div>

  <div class="rule-block">
    <b>Rule (EN):</b>
    We use these words to show how strong or sufficient something is:  
    <b>too + adj</b> ‚Äì more than is good;  
    <b>adj + enough</b> ‚Äì sufficient;  
    <b>so + adj</b> ‚Äì very;  
    <b>such + adj + noun</b> ‚Äì very (with noun).
  </div>

  <div class="rule-block">
    <b>–ü—Ä–∞–≤–∏–ª–æ (RU):</b>
    <b>too</b> ‚Äì —Å–ª–∏—à–∫–æ–º; <b>enough</b> ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ; <b>so</b> ‚Äì —Ç–∞–∫, –æ—á–µ–Ω—å;  
    <b>such</b> ‚Äì —Ç–∞–∫–æ–π/—Ç–∞–∫–∞—è + —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ.
  </div>

  <div class="formula">
    too + adj ¬∑ adj + enough ¬∑ so + adj ¬∑ such + (a) + adj + noun
  </div>

  <h3>Exercise 1 ‚Äì Affirmative</h3>
  <ol>
    <li>It is too ___ (cold).</li>
    <li>She is tall enough ___ (play) basketball.</li>
    <li>He is so ___ (kind).</li>
    <li>It is such a ___ day. (nice)</li>
    <li>They are too ___ (slow).</li>
    <li>She is so ___ (happy).</li>
  </ol>

  <h3>Exercise 2 ‚Äì Negative</h3>
  <ol>
    <li>He isn‚Äôt tall enough ___ (reach) the shelf.</li>
    <li>It isn‚Äôt too ___ (late) to start.</li>
    <li>She isn‚Äôt ___ enough. (strong)</li>
    <li>They aren‚Äôt so ___ (fast) as us.</li>
    <li>It isn‚Äôt such a ___ movie. (good)</li>
    <li>He isn‚Äôt too ___ (busy) today.</li>
  </ol>

  <h3>Exercise 3 ‚Äì Questions</h3>
  <ol>
    <li>Is it too ___ (hot) for you?</li>
    <li>Is she ___ enough? (smart)</li>
    <li>Is he so ___ (kind)?</li>
    <li>Is it such a ___ day? (bad)</li>
    <li>Are they too ___ (slow)?</li>
    <li>Is it ___ enough? (warm)</li>
  </ol>

  <h3>Exercise 4 ‚Äì Word Order</h3>
  <ol>
    <li>cold / too / it / is</li>
    <li>tall / she / enough / is</li>
    <li>kind / so / he / is</li>
    <li>a / day / such / nice / it / is</li>
    <li>slow / too / they / are</li>
    <li>happy / so / she / is</li>
  </ol>

  <h3>Exercise 5 ‚Äì Complete</h3>
  <ol>
    <li>It is too _________ (big).</li>
    <li>She is _________ (strong) enough.</li>
    <li>He is so _________ (funny).</li>
    <li>It is such a _________ (sad) story.</li>
    <li>They are _________ (too) slow.</li>
    <li>It is warm _________ (enough).</li>
  </ol>

  <h3>Exercise 6 ‚Äì Choose</h3>
  <ol>
    <li>It is ___ hot. (too / enough)</li>
    <li>She is tall ___. (enough / too)</li>
    <li>He is ___ kind. (so / such)</li>
    <li>She is ___ a good student. (such / so)</li>
    <li>They are ___ slow. (too / enough)</li>
    <li>It is cold ___. (enough / such)</li>
  </ol>
  
/* ---------- STATE & STORAGE ---------- */

let currentUser = null; // {name, code, classLabel, stars, lastLogin}
let currentTopicId = null;

function todayStr(){
  return new Date().toISOString().slice(0,10);
}
function studentKey(code){
  return "bayan_student_"+code;
}

function loadStudent(code,name,classLabel){
  const key = studentKey(code);
  let data = null;
  try{
    data = JSON.parse(localStorage.getItem(key));
  }catch(e){
    data=null;
  }
  if(!data){
    data = {
      name:name||"",
      code,
      classLabel,
      stars:0,
      lastLogin:null
    };
  }else{
    if(name) data.name = name;
    data.classLabel = classLabel;
  }
  data.lastLogin = todayStr();
  localStorage.setItem(key,JSON.stringify(data));
  return data;
}
function saveCurrent(){
  if(!currentUser) return;
  const key = studentKey(currentUser.code);
  localStorage.setItem(key,JSON.stringify(currentUser));
}

/* ---------- SCREEN SWITCHING ---------- */

function showOnly(id){
  document.getElementById("loginScreen").classList.add("hidden");
  document.getElementById("mainMenuScreen").classList.add("hidden");
  document.getElementById("topicScreen").classList.add("hidden");
  document.getElementById("teacherScreen").classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
}
function setTopInfo(html){
  document.getElementById("topInfo").innerHTML = html;
}

/* ---------- LOGIN ---------- */

function handleLogin(){
  const name = document.getElementById("loginName").value.trim();
  const codeStr = document.getElementById("loginCode").value.trim();
  const errorEl = document.getElementById("loginError");
  errorEl.classList.add("hidden");
  errorEl.textContent = "";

  if(!codeStr){
    errorEl.textContent = "Enter your code.";
    errorEl.classList.remove("hidden");
    return;
  }

  if(codeStr==="3234"){
    setTopInfo(`Logged in as <strong>TEACHER</strong> ¬∑ code 3234`);
    renderTeacherTable();
    showOnly("teacherScreen");
    return;
  }

  const num = Number(codeStr);
  if(!Number.isInteger(num)){
    errorEl.textContent = "Code must be a number.";
    errorEl.classList.remove("hidden");
    return;
  }
  const classLabel = getClassByCode(num);
  if(!classLabel){
    errorEl.textContent = "Unknown student code. Ask your teacher.";
    errorEl.classList.remove("hidden");
    return;
  }
  if(!name){
    errorEl.textContent = "Enter your name.";
    errorEl.classList.remove("hidden");
    return;
  }

  currentUser = loadStudent(num,name,classLabel);
  saveCurrent();
  setTopInfo(
    `Class <strong>${currentUser.classLabel}</strong> ¬∑ Student: <strong>${currentUser.name}</strong> (code ${currentUser.code}) ¬∑ Stars: <strong id="topStars">${currentUser.stars}</strong>`
  );
  buildMainMenu();
  updateTopStars();
  showOnly("mainMenuScreen");
}

function backToLogin(){
  currentUser = null;
  setTopInfo("Not logged in");
  document.getElementById("loginCode").value = "";
  document.getElementById("loginName").value = "";
  showOnly("loginScreen");
}

/* ---------- MAIN MENU UI ---------- */

function buildMainMenu(){
  if(!currentUser) return;
  document.getElementById("menuInfo").innerHTML =
    `Class <strong>${currentUser.classLabel}</strong>, student <strong>${currentUser.name}</strong> (code ${currentUser.code})`;
  document.getElementById("menuStars").textContent = currentUser.stars ?? 0;

  const grid = document.getElementById("menuTopics");
  grid.innerHTML = "";
  topics.forEach(t=>{
    const div = document.createElement("div");
    div.className = "topic-card";
    const color = topicColors[t.id] || "#005b73";
    div.style.borderColor = color+"55";
    div.style.background = "#f8fafc";
    div.innerHTML = `
      <div class="topic-card-title">${t.id}. ${t.title}</div>
      <div class="topic-card-sub">${t.level}</div>
    `;
    div.addEventListener("click",()=>openTopic(t.id));
    grid.appendChild(div);
  });

  // demo message in AI panel
  const chat = document.getElementById("chatBox");
  chat.innerHTML = "";
  const msg = document.createElement("div");
  msg.className = "chat-msg";
  msg.textContent = "AI Bayan chat will be available later. Now use topics and exercises.";
  chat.appendChild(msg);
  document.getElementById("aiLimit").textContent = "¬∑ demo mode";
}

/* ---------- TOPIC SCREEN ---------- */

function openTopic(id){
  currentTopicId = id;
  const t = topics.find(x=>x.id===id);
  if(!t) return;

  const color = topicColors[id] || "#005b73";
  document.documentElement.style.setProperty("--topicColor",color);

  document.getElementById("topicHeaderTitle").textContent = `${id}. ${t.title}`;
  document.getElementById("topicHeaderTag").innerHTML =
    `<span class="tag">${t.level}</span>`;

  const rc = document.getElementById("topicRuleContainer");
  rc.innerHTML = "";
  const gbox = document.createElement("div");
  gbox.className = "grammar-box";
  gbox.innerHTML = `
    <strong>Rule (EN):</strong> ${t.explanation || ""}
    ${
      t.formulas && t.formulas.length
        ? "<div style='margin-top:6px;'>"+
          t.formulas.map(f=>`<span class="formula">${f}</span>`).join(" ")+
          "</div>"
        : ""
    }
    ${
      t.ruleRu || t.usageRu
        ? `<div class="grammar-ru">
             <strong>–ü—Ä–∞–≤–∏–ª–æ (RU):</strong><br>
             ${t.ruleRu||""}<br>${t.usageRu||""}
           </div>`
        : ""
    }
  `;
  rc.appendChild(gbox);

  if(t.examples && t.examples.length){
    const ul = document.createElement("ul");
    ul.className = "examples";
    t.examples.forEach(e=>{
      const li = document.createElement("li");
      li.textContent = e;
      ul.appendChild(li);
    });
    rc.appendChild(ul);
  }

  const ec = document.getElementById("topicExercisesContainer");
  ec.innerHTML = "";
  if(!t.exercises || t.exercises.length===0){
    const p = document.createElement("p");
    p.className = "muted";
    p.style.marginTop = "10px";
    p.textContent = "Exercises for this topic will be added later.";
    ec.appendChild(p);
  }else{
    const wrapper = document.createElement("div");
    wrapper.className = "exercises";
    t.exercises.forEach((ex,exIndex)=>{
      const block = document.createElement("div");
      block.className = "exercise-block";
      const title = document.createElement("div");
      title.className = "exercise-title";
      title.innerHTML = ex.title;
      block.appendChild(title);

      ex.questions.forEach((q,qIndex)=>{
        const row = document.createElement("div");
        row.className = "question-row";
        const qText = document.createElement("div");
        qText.className = "question-text";
        qText.textContent = `${qIndex+1}) ${q.text}`;
        row.appendChild(qText);

        const opts = document.createElement("div");
        opts.className = "options";
        q.options.forEach((opt,optIndex)=>{
          const label = document.createElement("label");
          const radio = document.createElement("input");
          radio.type = "radio";
          const gname = `t${id}_e${exIndex}_q${qIndex}`;
          radio.name = gname;
          radio.value = optIndex;
          label.appendChild(radio);
          label.appendChild(document.createTextNode(" "+opt));
          opts.appendChild(label);
        });
        row.appendChild(opts);

        const mark = document.createElement("span");
        mark.className = "mark";
        mark.id = `mark_t${id}_e${exIndex}_q${qIndex}`;
        row.appendChild(mark);

        block.appendChild(row);
      });

      const footer = document.createElement("div");
      footer.className = "exercise-footer";
      const small = document.createElement("small");
      small.textContent = "Each correct answer gives you 1 star.";
      const btn = document.createElement("button");
      btn.className = "btn btn-primary";
      btn.textContent = "Check";
      btn.addEventListener("click",()=>checkExercise(id,exIndex));
      footer.appendChild(small);
      footer.appendChild(btn);
      block.appendChild(footer);

      wrapper.appendChild(block);
    });
    ec.appendChild(wrapper);
  }

  showOnly("topicScreen");
}

function backToMenu(){
  if(!currentUser){
    backToLogin();
    return;
  }
  buildMainMenu();
  showOnly("mainMenuScreen");
}

function printCurrentTopic(){
  // –ö–Ω–æ–ø–∫–∞ –ø–µ—á–∞—Ç–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–º—ã,
  // –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—á–∞—Ç—å
  if(!currentTopicId) return;
  window.print();
}

function checkExercise(topicId,exIndex){
  if(!currentUser) return;
  const t = topics.find(x=>x.id===topicId);
  if(!t) return;
  const ex = t.exercises[exIndex];
  if(!ex) return;

  let gained = 0;
  ex.questions.forEach((q,qIndex)=>{
    const gname = `t${topicId}_e${exIndex}_q${qIndex}`;
    const selected = document.querySelector(`input[name="${gname}"]:checked`);
    const markEl = document.getElementById(`mark_t${topicId}_e${exIndex}_q${qIndex}`);
    if(!markEl) return;
    markEl.textContent = "";
    markEl.classList.remove("correct","wrong");

    if(!selected){
      markEl.textContent = "‚Ä¢";
      return;
    }
    const chosen = Number(selected.value);
    if(chosen===q.correct){
      markEl.textContent="‚úì";
      markEl.classList.add("correct");
      gained++;
    }else{
      markEl.textContent="‚úó";
      markEl.classList.add("wrong");
    }
  });

  const status = document.getElementById("topicStatus");
  if(gained>0){
    currentUser.stars += gained;
    saveCurrent();
    updateTopStars();
    if(status){
      status.textContent = `Well done! You gained ${gained} star(s).`;
    }
  }else{
    if(status){
      status.textContent = "No correct answers yet. Try again!";
    }
  }
}
  
/* ---------- TEACHER TABLE ---------- */

function renderTeacherTable(){
  const tbody = document.querySelector("#teacherTable tbody");
  tbody.innerHTML = "";
  const allStudents = [];
  classRanges.forEach(r=>{
    for(let code=r.from; code<=r.to; code++){
      const key = studentKey(code);
      let data = null;
      try{
        data = JSON.parse(localStorage.getItem(key));
      }catch(e){ data=null; }
      if(data) allStudents.push(data);
    }
  });
  if(allStudents.length===0){
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    td.colSpan = 5;
    td.textContent =
      "No student data in this browser yet. Ask students to log in and work with tasks.";
    tr.appendChild(td);
    tbody.appendChild(tr);
    return;
  }
  allStudents.sort((a,b)=>a.code-b.code);
  allStudents.forEach(s=>{
    const tr = document.createElement("tr");
    const cls = document.createElement("td");
    cls.textContent = s.classLabel || getClassByCode(s.code) || "";
    const codeTd = document.createElement("td");
    codeTd.textContent = s.code;
    const nameTd = document.createElement("td");
    nameTd.textContent = s.name || "";
    const starsTd = document.createElement("td");
    starsTd.textContent = s.stars ?? 0;
    const loginTd = document.createElement("td");
    loginTd.textContent = s.lastLogin || "";
    tr.appendChild(cls);
    tr.appendChild(codeTd);
    tr.appendChild(nameTd);
    tr.appendChild(starsTd);
    tr.appendChild(loginTd);
    tbody.appendChild(tr);
  });
}

/* ---------- INIT ---------- */

showOnly("loginScreen");
  /* ----------- FIX: ADD updateTopStars FUNCTION ----------- */
function updateTopStars() {
  const topStars = document.getElementById("topStars");
  if (!topStars) return;

  const stars = localStorage.getItem("stars") || 0;
  topStars.textContent = "Stars: " + stars;
}
</script>
</body>
</html>
